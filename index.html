<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊòüÂÖâÂú£ËØûÊ∏∏Âõ≠‰ºö</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Inter:wght@300;400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0a1525;
            color: #f0e6d2;
            overflow: hidden;
            height: 100vh;
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.8s ease, transform 0.8s ease;
            overflow: hidden;
        }

        /* ========== Âä†ËΩΩÁïåÈù¢ ========== */
        #loading-screen {
            background: linear-gradient(180deg, #0a1525 0%, #1a2b45 100%);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .snow-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(100vh); }
        }

        .gate-container {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .gate {
            position: relative;
            width: 400px;
            height: 500px;
            margin: 0 auto;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .gate:hover {
            transform: scale(1.02);
        }

        .gate-frame {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3d2c1a 0%, #2a1c10 100%);
            border-radius: 20px;
            box-shadow: 
                inset 0 0 30px rgba(139, 69, 19, 0.7),
                0 0 60px rgba(255, 215, 0, 0.4),
                0 10px 40px rgba(0, 0, 0, 0.7);
            border: 8px solid #5d4037;
        }

        .gate-door {
            position: absolute;
            width: 46%;
            height: 85%;
            top: 7%;
            background: linear-gradient(135deg, #5d4037 0%, #3e2723 100%);
            border-radius: 10px;
            transition: transform 1.5s ease;
            box-shadow: 
                inset 0 0 20px rgba(0, 0, 0, 0.8),
                0 5px 15px rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .left-door {
            left: 4%;
            transform-origin: left center;
            border-right: 2px solid #8d6e63;
        }

        .right-door {
            right: 4%;
            transform-origin: right center;
            border-left: 2px solid #8d6e63;
        }

        .door-knocker {
            position: absolute;
            width: 50px;
            height: 70px;
            background: radial-gradient(circle at 30% 30%, #d4af37 0%, #b8860b 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.5),
                inset 0 2px 5px rgba(255, 255, 255, 0.3);
            cursor: pointer;
            animation: pulse 2s infinite;
            z-index: 10;
        }

        .door-knocker:hover {
            animation: shake 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        .door-knocker-inner {
            width: 20px;
            height: 30px;
            background: #8b4513;
            border-radius: 50%;
        }

        .gate-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .holly {
            position: absolute;
            width: 100px;
            height: 80px;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            background: #2e7d32;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .holly::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: #d32f2f;
            border-radius: 50%;
            top: 20%;
            left: 30%;
            box-shadow: 
                25px 10px 0 #d32f2f,
                50px 0 0 #d32f2f;
        }

        .lights {
            position: absolute;
            width: 100%;
            height: 20px;
            top: 15%;
            display: flex;
            justify-content: space-around;
        }

        .light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: gold;
            animation: twinkle 1.5s infinite;
            box-shadow: 0 0 10px gold;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }

        .gate-text {
            margin-top: 30px;
            font-family: 'Cedarville Cursive', cursive;
            font-size: 24px;
            color: #f0e6d2;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            letter-spacing: 2px;
            animation: textGlow 3s infinite;
        }

        @keyframes textGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { text-shadow: 0 0 15px rgba(255, 215, 0, 0.9), 0 0 20px rgba(255, 215, 0, 0.5); }
        }

        .loading-progress {
            position: absolute;
            bottom: 20%;
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #ffd700);
            width: 0%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* ========== Âú∞ÂõæÁïåÈù¢ ========== */
        #map-screen {
            background: radial-gradient(ellipse at center, #1a237e 0%, #0d0f2e 70%, #000 100%);
            opacity: 0;
            pointer-events: none;
            z-index: 90;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            perspective: 1000px;
        }

        .map-background {
            position: absolute;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(198, 119, 119, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(119, 198, 163, 0.3) 0%, transparent 50%);
            animation: aurora 20s infinite alternate;
        }

        @keyframes aurora {
            0% { filter: hue-rotate(0deg); transform: rotate(0deg); }
            100% { filter: hue-rotate(20deg); transform: rotate(0.5deg); }
        }

        .map-content {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1s ease;
        }

        .christmas-tree {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 200px;
            z-index: 5;
            cursor: pointer;
        }

        .tree-trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 40px;
            background: #8b4513;
            border-radius: 5px;
        }

        .tree-body {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-bottom: 100px solid #2e7d32;
        }

        .tree-body::before {
            content: '';
            position: absolute;
            top: 30px;
            left: -50px;
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 80px solid #388e3c;
        }

        .tree-body::after {
            content: '';
            position: absolute;
            top: 60px;
            left: -40px;
            width: 0;
            height: 0;
            border-left: 40px solid transparent;
            border-right: 40px solid transparent;
            border-bottom: 60px solid #43a047;
        }

        .tree-star {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: gold;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: starGlow 2s infinite;
            z-index: 10;
        }

        @keyframes starGlow {
            0%, 100% { box-shadow: 0 0 10px gold; }
            50% { box-shadow: 0 0 25px gold, 0 0 40px gold; }
        }

        .map-snow {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .map-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .shop {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding-bottom: 5px;
        }

        .shop:hover {
            transform: translateY(-5px) scale(1.05);
            z-index: 20;
        }

        .shop-building {
            width: 60px;
            height: 50px;
            border-radius: 8px 8px 0 0;
            position: relative;
        }

        .shop-roof {
            width: 0;
            height: 0;
            border-left: 30px solid transparent;
            border-right: 30px solid transparent;
            border-bottom: 20px solid #8b4513;
            position: absolute;
            top: -20px;
            left: 0;
        }

        .shop-girl {
            width: 30px;
            height: 40px;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            animation: breathe 3s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }

        .shop-name {
            font-size: 12px;
            margin-top: 5px;
            text-align: center;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            max-width: 80px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .shop.locked {
            filter: grayscale(0.8) brightness(0.5);
            pointer-events: none;
        }

        .shop.active {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.8); }
        }

        .progress-ring {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            z-index: 100;
        }

        .ring-circle {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .ring-bg {
            stroke: rgba(255, 255, 255, 0.1);
        }

        .ring-progress {
            stroke: #ffd700;
            stroke-dasharray: 226;
            stroke-dashoffset: 226;
            transition: stroke-dashoffset 1s ease;
        }

        .ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
        }

        /* ========== ÂØπËØùÁïåÈù¢ - ÈõÜÊàêÊä†ÂÉèÁ´ãÁªò ========== */
        #dialogue-screen {
            background: #0a1525;
            opacity: 0;
            pointer-events: none;
            z-index: 80;
            display: flex;
        }

        .dialogue-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        /* Â∑¶‰æßÔºöÊä†ÂÉèÁ´ãÁªòÂå∫Âüü */
        .girl-portrait {
            width: 35%;
            background: rgba(10, 21, 37, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            position: relative;
        }

        .portrait-canvas-container {
            width: 300px;
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
            animation: float 6s ease-in-out infinite;
        }

        .portrait-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* ‰∏ä‰º†ÊåâÈíÆÊ†∑Âºè */
        .upload-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #d4af37, #ffd700);
            border: none;
            border-radius: 10px;
            color: #0a1525;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .upload-btn i {
            font-size: 16px;
        }

        #file-input {
            display: none;
        }

        .girl-name {
            margin-top: 30px;
            font-size: 32px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .girl-title {
            font-size: 18px;
            color: #b0bec5;
            margin-top: 5px;
            margin-bottom: 15px;
        }

        /* Âè≥‰æßÔºöÂØπËØùÂå∫Âüü */
        .dialogue-area {
            width: 65%;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        .dialogue-background {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0.3;
            background-size: cover;
            background-position: center;
            z-index: -1;
            filter: blur(5px);
        }

        .dialogue-text {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            min-height: 300px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
            font-size: 20px;
            line-height: 1.6;
            overflow-y: auto;
            font-family: 'Cedarville Cursive', cursive;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dialogue-text:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-5px);
        }

        .dialogue-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .close-dialogue {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .close-dialogue:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .dialogue-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* ÈªòËÆ§Âç†‰ΩçÁ¨¶Ê†∑Âºè */
        .portrait-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(78, 205, 196, 0.2));
            color: rgba(255, 255, 255, 0.5);
            font-size: 16px;
            text-align: center;
            padding: 20px;
        }

        .portrait-placeholder i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* ========== Âú£ËØûÊ†ëÁïåÈù¢ ========== */
        #tree-screen {
            background: radial-gradient(ellipse at center, #0a1f1f 0%, #050a14 100%);
            opacity: 0;
            pointer-events: none;
            z-index: 70;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .tree-container {
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .big-tree {
            width: 500px;
            height: 700px;
            position: relative;
        }

        .big-tree-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 200px solid transparent;
            border-right: 200px solid transparent;
            border-bottom: 400px solid #1b5e20;
            z-index: 5;
        }

        .big-tree-body::before {
            content: '';
            position: absolute;
            top: 100px;
            left: -150px;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 300px solid #2e7d32;
        }

        .big-tree-body::after {
            content: '';
            position: absolute;
            top: 200px;
            left: -100px;
            width: 0;
            height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 200px solid #388e3c;
        }

        .big-tree-trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 100px;
            background: #5d4037;
            border-radius: 10px;
            z-index: 4;
        }

        .big-tree-star {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: gold;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: starGlow 2s infinite;
            z-index: 10;
        }

        .ornament {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 6;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }

        .ornament:hover {
            transform: scale(1.2);
        }

        .wish-section {
            position: absolute;
            right: 10%;
            top: 50%;
            transform: translateY(-50%);
            width: 400px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .wish-title {
            font-size: 28px;
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
        }

        .wish-paper {
            background: url('https://www.transparenttextures.com/patterns/parchment.png');
            background-color: #f5e9d4;
            border-radius: 10px;
            padding: 20px;
            min-height: 200px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .wish-textarea {
            width: 100%;
            height: 180px;
            background: transparent;
            border: none;
            resize: none;
            font-family: 'Cedarville Cursive', cursive;
            font-size: 18px;
            color: #5d4037;
            line-height: 1.5;
        }

        .wish-textarea:focus {
            outline: none;
        }

        .wish-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .color-picker {
            display: flex;
            gap: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .color-option.selected {
            border-color: white;
            transform: scale(1.2);
        }

        .wish-button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #d4af37, #ffd700);
            border: none;
            border-radius: 10px;
            color: #0a1525;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wish-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .return-to-map {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .return-to-map:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        /* ========== ÂìçÂ∫îÂºèËÆæËÆ° ========== */
        @media (max-width: 1200px) {
            .gate { width: 350px; height: 450px; }
            .girl-portrait { width: 40%; }
            .dialogue-area { width: 60%; }
            .portrait-canvas-container { width: 250px; height: 350px; }
        }

        @media (max-width: 768px) {
            .gate { width: 300px; height: 400px; }
            .dialogue-container { flex-direction: column; }
            .girl-portrait { width: 100%; height: 45%; padding: 20px; }
            .dialogue-area { width: 100%; height: 55%; padding: 20px; }
            .portrait-canvas-container { width: 200px; height: 280px; }
            .tree-container { flex-direction: column; }
            .wish-section { position: relative; right: 0; top: 0; transform: none; width: 100%; margin-top: 30px; }
        }
    </style>
</head>
<body>
    <!-- Âä†ËΩΩÁïåÈù¢ -->
    <div id="loading-screen" class="screen">
        <div class="snow-container" id="snowfall"></div>
        <div class="gate-container">
            <div class="gate" id="gate">
                <div class="gate-frame"></div>
                <div class="left-door gate-door"></div>
                <div class="right-door gate-door"></div>
                <div class="door-knocker" id="door-knocker">
                    <div class="door-knocker-inner"></div>
                </div>
                <div class="gate-decoration">
                    <div class="holly"></div>
                    <div class="lights">
                        <div class="light" style="animation-delay: 0s;"></div>
                        <div class="light" style="animation-delay: 0.2s;"></div>
                        <div class="light" style="animation-delay: 0.4s;"></div>
                        <div class="light" style="animation-delay: 0.6s;"></div>
                        <div class="light" style="animation-delay: 0.8s;"></div>
                    </div>
                </div>
            </div>
            <div class="gate-text">ËΩªÂè©Èó®ÁéØÔºåÂºÄÂêØÂ•áÂ¢É</div>
            <div class="loading-progress">
                <div class="loading-bar" id="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- Âú∞ÂõæÁïåÈù¢ -->
    <div id="map-screen" class="screen">
        <div class="map-container">
            <div class="map-background"></div>
            <div class="map-snow" id="map-snow"></div>
            <div class="map-content" id="map-content">
                <div class="christmas-tree" id="final-tree">
                    <div class="tree-trunk"></div>
                    <div class="tree-body"></div>
                    <div class="tree-star"></div>
                </div>
                <!-- Â∫óÈì∫Â∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
            <div class="progress-ring">
                <svg viewBox="0 0 80 80">
                    <circle class="ring-circle ring-bg" cx="40" cy="40" r="36"></circle>
                    <circle class="ring-circle ring-progress" id="progress-circle" cx="40" cy="40" r="36"></circle>
                </svg>
                <div class="ring-text"><span id="progress-text">0</span>/12</div>
            </div>
            <div class="map-controls">
                <div class="control-btn" id="zoom-in"><i class="fas fa-search-plus"></i></div>
                <div class="control-btn" id="zoom-out"><i class="fas fa-search-minus"></i></div>
                <div class="control-btn" id="reset-view"><i class="fas fa-crosshairs"></i></div>
            </div>
        </div>
    </div>

    <!-- ÂØπËØùÁïåÈù¢ -->
    <div id="dialogue-screen" class="screen">
        <div class="close-dialogue" id="close-dialogue"><i class="fas fa-times"></i></div>
        <div class="dialogue-container">
            <div class="girl-portrait">
                <!-- Êä†ÂÉèÁîªÂ∏ÉÂÆπÂô® -->
                <div class="portrait-canvas-container">
                    <canvas id="portrait-canvas" class="portrait-canvas" width="300" height="400"></canvas>
                </div>
                
                <div class="girl-name" id="girl-name">Koko</div>
                <div class="girl-title" id="girl-title">ÂøÉË∑≥ÂÖ±È∏£ÁîµÂè∞</div>
                
                <!-- ‰∏ä‰º†ÊåâÈíÆ -->
                <input type="file" id="file-input" accept="image/*">
                <button class="upload-btn" onclick="document.getElementById('file-input').click()">
                    <i class="fas fa-upload"></i>‰∏ä‰º†Á´ãÁªòÔºàËá™Âä®Êä†ÂÉèÔºâ
                </button>
                
                <div class="dialogue-indicator">ÁÇπÂáªÂØπËØùÁªßÁª≠</div>
            </div>
            <div class="dialogue-area">
                <div class="dialogue-background" id="dialogue-bg"></div>
                <div class="dialogue-text" id="dialogue-text">
                    Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑ‰∏ñÁïåÔºÅÊàëÊòØKokoÔºå‰∏Ä‰∏™Áî®rapË°®ËææÁúüÂÆûËá™ÊàëÁöÑÂ•≥Â≠©„ÄÇ‰ªäÂ§©ÔºåÊÉ≥Âê¨Âê¨ÈìÅÂàòÊµ∑ËÉåÂêéÁöÑÊïÖ‰∫ãÂêóÔºü
                </div>
                <div class="dialogue-controls">
                    <button class="control-button" id="prev-dialogue">‰∏ä‰∏ÄÂè•</button>
                    <button class="control-button" id="next-dialogue">‰∏ã‰∏ÄÂè•</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Âú£ËØûÊ†ëÁïåÈù¢ -->
    <div id="tree-screen" class="screen">
        <button class="return-to-map" id="return-to-map">ËøîÂõûÂú∞Âõæ</button>
        <div class="tree-container">
            <div class="big-tree" id="big-tree">
                <div class="big-tree-trunk"></div>
                <div class="big-tree-body"></div>
                <div class="big-tree-star"></div>
                <!-- Ë£ÖÈ•∞ÂìÅÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
            <div class="wish-section">
                <h2 class="wish-title">ËÆ∏‰∏ãÂú£ËØûÂøÉÊÑø</h2>
                <div class="wish-paper">
                    <textarea class="wish-textarea" id="wish-textarea" placeholder="ÂÜô‰∏ã‰Ω†ÁöÑÂú£ËØûÂøÉÊÑø... (ÊúÄÂ§ö140Â≠ó)" maxlength="140"></textarea>
                </div>
                <div class="wish-controls">
                    <div class="color-picker">
                        <div class="color-option selected" style="background-color: #ff6b6b;" data-color="#ff6b6b"></div>
                        <div class="color-option" style="background-color: #4ecdc4;" data-color="#4ecdc4"></div>
                        <div class="color-option" style="background-color: #ffd166;" data-color="#ffd166"></div>
                        <div class="color-option" style="background-color: #06d6a0;" data-color="#06d6a0"></div>
                        <div class="color-option" style="background-color: #118ab2;" data-color="#118ab2"></div>
                    </div>
                    <button class="wish-button" id="hang-wish">ÊåÇ‰∏äÂøÉÊÑø</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Èü≥È¢ëÂÖÉÁ¥† -->
    <audio id="bg-music" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-christmas-is-coming-1194.mp3" type="audio/mpeg">
    </audio>
    <audio id="door-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-door-hinge-1181.mp3" type="audio/mpeg">
    </audio>
    <audio id="bell-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3" type="audio/mpeg">
    </audio>

    <script>

// Â•≥Â≠©Êï∞ÊçÆ - Á∫øÊÄßÂØπËØùÁâàÊú¨
const girls = [
    {
        id: 1,
        name: "Koko",
        portrait: "assets/portraits/id01.jpg",
        title: "ÂøÉË∑≥ÂÖ±È∏£ÁîµÂè∞",
        color: "#ff6b6b",
        position: {x: 15, y: 30},
        buildingColor: "#d32f2f",
        dialogues: [
            "YoÔºÅÁªà‰∫éÊù•‰∫Ü‰∏™ËÉΩËÅäÁöÑ‰∫∫ÔºÅÂæàÂ§ö‰∫∫Âè™ÁúãÂà∞ÊàëÁöÑrapÂíåÂ§ñË≤å...",
            "‰ΩÜÈìÅÂàòÊµ∑‰∏çÂè™ÊòØÈÄ†ÂûãÔºåÂÆÉ‰ª£Ë°®ÊàëÁöÑÂùöÊåÅ„ÄÇÂ∞±ÂÉèrapÔºåË°®Èù¢ÈÖ∑ÁÇ´ÔºåÂÜÖÊ†∏ÁúüÂÆû„ÄÇ",
            "ÊØèÂè•Ê≠åËØçÈÉΩÊòØÊàëÁöÑÁúüÂÆûÊÑüÂèó„ÄÇÂÜôrapÂ∞±ÂÉèÊääÂøÉË∑≥ÂèòÊàêËäÇÂ•èÔºåÊääÊÉÖÁª™ÂèòÊàêÈüµËÑö„ÄÇ",
            "‰øùÊåÅËøô‰∏™ÂΩ¢Ë±°‰ºö‰∏ç‰ºöÁ¥ØÔºüËØ¥ÂÆûËØùÔºåÊúâÊó∂ÂÄô‰ºö...",
            "‰ΩÜÂΩìÁ≤â‰∏ùÂëäËØâÊàëÔºåÊàëÁöÑÈü≥‰πêÁªô‰∫Ü‰ªñ‰ª¨ÂãáÊ∞îÔºå‰∏ÄÂàáÈÉΩÂÄºÂæó‰∫Ü„ÄÇ",
            "YoÔºÅÂú£ËØûËÄÅ‰∫∫È©æÁùÄÈõ™Ê©áÊù•ÔºåÁ§ºÁâ©Ë£ÖÊª°‰∏ÄÈ∫ªË¢ãÔºåÈìÅÂàòÊµ∑Â•≥Â≠©ÊúâËØùËØ¥ÔºöÂÅöÁúüÂÆûÁöÑËá™Â∑±ÊúÄËá™Âú®ÔºÅ",
            "ËøôÂ∞±ÊòØÊàëÁöÑÂú£ËØûrapÁ•ùÁ¶èÔºÅ‰øùÊåÅÁúüÂÆûÔºå‰øùÊåÅËäÇÂ•èÔºåÂú£ËØûÂø´‰πêÔºÅ"
        ],
        icon: "üé§"
    },
    {
        id: 2,
        name: "ÊñáÂ§èÂ•àÂ∞î",
        portrait: "assets/portraits/id02.jpg",
        title: "ÂÖ®ÊòéÊòüÂÆ¢ÂéÖ",
        color: "#4ecdc4",
        position: {x: 30, y: 15},
        buildingColor: "#00796b",
        dialogues: [
            "Ê¨¢ËøéÔºÅÂà´Ë¢´Ëøô‰∏ÄÂ±ãÂ≠êÊî∂ËóèÂêìÂà∞ÔΩûÊ≥∞Ëø™ÁÜä„ÄÅÂêâ‰ªñ„ÄÅÊ£íÁêÉ...ÊØèÊ†∑ÈÉΩÊòØÊàëÁöÑ‰∏çÂêåÈù¢„ÄÇ",
            "ÂæàÂ§ö‰∫∫ÈóÆÊàëÊÄé‰πàÂπ≥Ë°°Ëøô‰πàÂ§öÁà±Â•Ω...ÂÖ∂ÂÆûÂÆÉ‰ª¨ÈÉΩÊòØÊàëÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰∏çÈúÄË¶ÅÂπ≥Ë°°„ÄÇ",
            "ÊØîÂ¶ÇÈÅìÂ•áÈòüÁöÑÊØîËµõÔºå2017Âπ¥‰∏ñÁïåÂ§ßËµõÈÇ£‰∏ÄÂàªÔºåÂÖ®Èòü‰∏ÄÂøÉÁöÑÊÑüËßâËÆ©ÊàëÊ∞∏ÁîüÈöæÂøò„ÄÇ",
            "ÈÇ£ÁßçÊÑüËßâÔºåÂ∞±ÂÉèÁé∞Âú®ÂíåÈòüÂèã‰ª¨‰∏ÄËµ∑Â•ãÊñóÁöÑÊØè‰∏ÄÂ§©„ÄÇ",
            "ÂºπÂêâ‰ªñÊó∂ÊòØÂè¶‰∏ÄÁßçÁä∂ÊÄÅÔºåË∂≥ÁêÉÊòØÈáäÊîæÔºåÂêâ‰ªñÊòØÊ≤âÊ∑Ä„ÄÇ‰∏Ä‰∏™Âä®Ôºå‰∏Ä‰∏™Èùô„ÄÇ",
            "Ëá≥‰∫éËøô‰∫õÈªëËÉ∂Âî±Áâá...Êï∞Â≠óÈü≥‰πêÊñπ‰æøÔºå‰ΩÜÈªëËÉ∂ÊúâÊ∏©Â∫¶ÔºåÂ∞±ÂÉèÊ≥∞Ëø™ÁÜä‰∏ÄÊ†∑„ÄÇ",
            "ËúòËõõ‰æ†Ôºü‰ªñÂëäËØâÊàëÔºåËÉΩÂäõË∂äÂ§ßË¥£‰ªªË∂äÂ§ß„ÄÇËøô‰πüÊòØÊàëÊÉ≥ÂØπÊú™Êù•ÁöÑËá™Â∑±ËØ¥ÁöÑËØù„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†ÁöÑÁîüÊ¥ª‰πüÂÉèÊàëÁöÑÊî∂Ëóè‰∏ÄÊ†∑‰∏∞ÂØåÂ§öÂΩ©ÔºÅ"
        ],
        icon: "‚öæ"
    },
    {
        id: 3,
        name: "Woni",
        portrait: "assets/portraits/id03.jpg",
        title: "Ê®±Ëä±Ëå∂ÂÆ§ÈùôÂøÉÂ§Ñ",
        color: "#ffd166",
        position: {x: 70, y: 25},
        buildingColor: "#ff8f00",
        dialogues: [
            "ËØ∑Âùê...Ëå∂Â∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü„ÄÇÂÖÉÈÖ±ÊòØÊàëÁöÑÊòµÁß∞ÔºåÂõ†‰∏∫ÊàëÊúâÊó∂ÂÄôÂÉèÈ∏µÈ∏ü‰∏ÄÊ†∑ËÉÜÂ∞è...",
            "‰ΩÜ‰ªäÂ§©ÔºåÊàëÊÉ≥ËØïÁùÄÂ§öËØ¥‰∏Ä‰∫õ„ÄÇÊòüÊòüÔºàÊàëÁöÑÁãóÁãóÔºâÊïô‰ºöÊàëÔºåÈù¢ÂØπÊâçÊòØÊúÄÂ•ΩÁöÑÊñπÂºè„ÄÇ",
            "ÂíåÊòüÊòüÂú®‰∏ÄËµ∑Êó∂ÔºåÂ∞±ÂÉèÊ®±Ëä±È£òËêΩ‰∏ÄÊ†∑ÂÆâÂÆÅ„ÄÇÂÆÉ‰∏ç‰ºöËØÑÂà§ÊàëÔºåÂè™ÊòØÂÆâÈùôÂú∞Èô™‰º¥...",
            "ËøôÊòØÊàëÁèçËßÜÁöÑÊ∏©ÊüîÔºå‰πüÊòØÊàëÂú®ËøôÂñßÂö£Ë°å‰∏ö‰∏≠ÁöÑÈÅøÈ£éÊ∏Ø„ÄÇ",
            "ËØ¥Âà∞ÂÅ∂ÂÉè...ÂùÇÂè£ÁöÑÂùöÊåÅÔºåÊ¢ÖË•øÁöÑË∞¶ÈÄä„ÄÇ‰∏çÂè™ÊòØÁêÉÊäÄÔºåÊõ¥ÊòØ‰∫∫Ê†ºÈ≠ÖÂäõ„ÄÇ",
            "ÊàëÊÉ≥Êàê‰∏∫ÈÇ£Ê†∑ÁöÑ‰∫∫‚Äî‚ÄîÂú®ÁêÉÂú∫‰∏äÈó™ËÄÄÔºåÂú®ÁîüÊ¥ª‰∏≠‰øùÊåÅË∞¶Âçë„ÄÇ",
            "Ê®±Ëä±Âç≥‰ΩøÂú®ÂÜ¨Â§©‰πü‰ºöÊúüÂæÖÊò•Â§©ÁöÑÁªΩÊîæ...Â∞±ÂÉèÊàë‰ª¨ÔºåÂç≥‰ΩøËÉÜÂ∞è‰πüË¶ÅÂãáÊï¢ÂêëÂâç„ÄÇ",
            "Âú£ËØûÂø´‰πê...ÊÑø‰Ω†ÁöÑÂøÉ‰∏≠‰πüÊúâ‰∏ÄÁâáÂÆÅÈùôÁöÑÊ®±Ëä±Êûó„ÄÇ"
        ],
        icon: "üå∏"
    },
    {
        id: 4,
        name: "SOOIN",
        portrait: "assets/portraits/id04.jpg",
        title: "ÂçäÊ¢¶ÁÉòÁÑôÂùä",
        color: "#06d6a0",
        position: {x: 85, y: 50},
        buildingColor: "#1b5e20",
        dialogues: [
            "ÂóØ...‰Ω†Êù•‰∫Ü„ÄÇYomiÂàöÂàöÂè´ÈÜíÊàë...Êä±Ê≠âÔºåÊàëÊÄªÊòØÂæàÂõ∞„ÄÇ",
            "‰ΩÜÂú®Ê¢¶ÈáåÔºåÊàëËÉΩÁÉ§Âá∫ÊúÄÁæéÂë≥ÁöÑÈ•ºÂπ≤...Ë¶ÅÂê¨Âê¨ÊàëÁöÑÊ¢¶ÂêóÔºü",
            "ÊàëÊ¢¶Âà∞Ëøá‰ºöÊ∏∏Ê≥≥ÁöÑÈ•ºÂπ≤...ÂèØÊÉúÊàëÊú¨‰∫∫‰∏ç‰ºöÊ∏∏Ê≥≥„ÄÇÊâÄ‰ª•Âè´Swimkim„ÄÇ",
            "YomiÂú®Ê¢¶ÈáåÊÄªÊòØÂÅ∑ÂêÉÂàöÁÉ§Â•ΩÁöÑÈù¢ÂåÖÔºåÂ∞±ÂÉèÁé∞ÂÆû‰∏≠‰∏ÄÊ†∑„ÄÇ",
            "ÂÆÉÊòØÊàëÁöÑÈóπÈíü„ÄÅÂìÅÂ∞ùÂ∏àÔºå‰πüÊòØÊúÄÂ•ΩÁöÑÂÄæÂê¨ËÄÖ...ËôΩÁÑ∂ÂÆÉÂè™‰ºöÊëáÂ∞æÂ∑¥„ÄÇ",
            "ÊúâÊó∂ÂÄôÊàëËßâÂæóÔºåÁù°Áú†‰∏çÊòØÈÄÉÈÅøÔºåËÄåÊòØÂè¶‰∏ÄÁßçÂΩ¢ÂºèÁöÑÂàõÈÄ†„ÄÇ",
            "Â¶ÇÊûúÊúâ‰∏ÄÂ§©‰∏çÂõ∞‰∫ÜÔºåÊàëÊúÄÊÉ≥...ÂºÄ‰∏ÄÂÆ∂ÁúüÊ≠£ÁöÑÁÉòÁÑôÂ∫óÔºåËÆ©YomiÂΩìÂ∫óÈïø„ÄÇ",
            "ÁÑ∂ÂêéÂ≠¶Ê∏∏Ê≥≥ÔºåÊàê‰∏∫ÁúüÊ≠£ÁöÑSwimkimÔºåËÄå‰∏çÂè™ÊòØ‰∏™Ê¢¶„ÄÇ",
            "Âú£ËØûÂø´‰πê...ÊÑø‰Ω†ÁöÑÊ¢¶Â¢É‰πüÂÖÖÊª°ÁîúËúúÁöÑÂàõÊÑè„ÄÇ"
        ],
        icon: "üç™"
    },
    {
        id: 5,
        name: "ÊùéÊ≤ÖÁ¶ß",
        portrait: "assets/portraits/id05.jpg",
        title: "ËøêÂä®ÁæéÂ¶ÜÂπ≥Ë°°ÂÆ§",
        color: "#118ab2",
        position: {x: 60, y: 75},
        buildingColor: "#1565c0",
        dialogues: [
            "‰ΩìËÇ≤ÈÉ®ÈïøÂíåÁæéÂ¶ÜÊéß‰∏çÂÜ≤Á™ÅÂêßÔºüÂ∞±ÂÉè...ËñÑÂ∑ß‰∏çËØ•Â≠òÂú®Ôºå‰ΩÜÂÖ∂‰ªñÂè£Âë≥ÈÉΩÂèØ‰ª•ÂíåË∞êÁõ∏Â§ÑÔºÅ",
            "‰Ωú‰∏∫‰ΩìËÇ≤ÈÉ®ÈïøÔºåÊàëÊÄªÂØπÂ•≥Â≠©‰ª¨ËØ¥ÔºöËøêÂä®‰∏çÊòØ‰∏∫‰∫ÜÂèñÊÇ¶Âà´‰∫∫ÔºåËÄåÊòØ‰∏∫‰∫ÜÂèñÊÇ¶Ëá™Â∑±„ÄÇ",
            "Â∞±ÂÉèÁæéÂ¶ÜÔºåÊòØËá™ÊàëË°®ËææÔºå‰∏çÊòØËøéÂêàÊ†áÂáÜ„ÄÇ",
            "ÁæéÂ¶ÜÂØπÊàëÊù•ËØ¥ÔºåÊó¢ÊòØË£ÖÈ•∞ËÆ©ÊàëÂºÄÂøÉÔºå‰πüÊòØÁõîÁî≤ËÆ©ÊàëÂãáÊï¢„ÄÇ",
            "‰ΩìËÇ≤Âú∫‰∏äÁöÑÊ±óÊ∞¥ÂíåÈïúÂ≠êÂâçÁöÑÂè£Á∫¢ÔºåÈÉΩÊòØÊàëÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰∏çÈúÄË¶Å‰∫åÈÄâ‰∏Ä„ÄÇ",
            "Áé∞Âú®ËØ¶ÁªÜËØ¥ËØ¥ËñÑÂ∑ß‰∏∫‰ªÄ‰πàËØ•Ë¢´Á¶ÅÊ≠¢ÔºüËñÑËç∑ÂíåÂ∑ßÂÖãÂäõÂ∞±ÂÉèÊ≤πÂíåÊ∞¥ÔºÅ",
            "ÂÆÉ‰ª¨Â∫îËØ•ÂêÑËá™Áæé‰∏ΩÔºåËÄå‰∏çÊòØÂº∫Ë°åËûçÂêà„ÄÇËøôÊòØÊàëÁöÑÁæéÈ£üÂì≤Â≠¶Ôºå‰πüÊòØ‰∫∫ÁîüÂì≤Â≠¶ÔºÅ",
            "Ë¶ÅÂÅöÂ∞±ÂÅöÂÆåÊï¥ÁöÑËá™Â∑±Ôºå‰∏çÈúÄË¶Å‰∏∫‰∫ÜËøéÂêàËÄåÊ∑∑Âêà„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†‰πüÊúâÂãáÊ∞îÂÅöÊúÄÁúüÂÆûÁöÑËá™Â∑±ÔºÅ"
        ],
        icon: "üíÑ"
    },
    {
        id: 6,
        name: "ÊùéËç£‰π¶",
        portrait: "assets/portraits/id06.jpg",
        title: "Ê∂≤ÊÄÅËäùÂ£´ÂíñÂï°È¶Ü",
        color: "#9d4edd",
        position: {x: 25, y: 70},
        buildingColor: "#7b1fa2",
        dialogues: [
            "ÂñµÔΩûÁúãÔºåËøôÂùóËäùÂ£´Âú®ÊÖ¢ÊÖ¢ÂèòÂΩ¢...Â∞±ÂÉèÊàëÁöÑ‰∫∫ÁîüËßÇ„ÄÇÂº∫Á°¨ÂÆπÊòìÊñ≠Ë£ÇÔºåÊüîËΩØÊâçËÉΩÈÄÇÂ∫î‰∏ÄÂàá„ÄÇ",
            "ÊÉ≥Â∞ùÂ∞ùÈªÑËäùÂ£´ÈÖçÊ®±Ê°ÉÂêóÔºüËøôÊòØÊàëÊúÄÁà±ÁöÑÁªÑÂêà‚Äî‚ÄîÊµìÈÉÅ‰∏éÊ∏ÖÊñ∞ÁöÑÁ¢∞Êíû„ÄÇ",
            "Âú®Â∑•‰Ωú‰∏≠‰øùÊåÅ'ÊüîËΩØ'ÔºüÂÉèÊ∂≤‰ΩìÁå´‰∏ÄÊ†∑Ôºå‰øùÊåÅÊ†∏ÂøÉ‰ΩÜÈÄÇÂ∫îÁéØÂ¢É„ÄÇ",
            "ÂéüÂàôÊòØÈ™®Êû∂ÔºåÁÅµÊ¥ªÊòØËÇåËÇâÔºåÁº∫‰∏Ä‰∏çÂèØ„ÄÇ",
            "Âπ∏ËøêÊï∞Â≠ó7ÂØπÊàëÁöÑÊÑè‰πâÔºü7ÊòØÂÆåÁæéÊï∞Â≠ó„ÄÇ‰∏ÄÂë®7Â§©ÔºåÂΩ©Ëôπ7Ëâ≤...",
            "ÂÆÉÊèêÈÜíÊàëÔºåÂÆåÊï¥Êù•Ëá™Â§öÊ†∑ÊÄßÔºåÂ∞±ÂÉèÊàëÁöÑÂ§öÈáçË∫´‰ªΩ„ÄÇ",
            "ËäùÂ£´ÁöÑÂåÖÂÆπÔºåËæ£Ê§íÁöÑÁÉ≠ÊÉÖÔºåÊ®±Ê°ÉÁöÑÁîúÁæé...ÁîüÊ¥ªÂ∞±ÂÉèÁæéÈ£üÔºåÈúÄË¶ÅÂπ≥Ë°°ÂêÑÁßçÊªãÂë≥„ÄÇ",
            "Á≤âËâ≤ÊòØÊàëÁöÑÁîüÊ¥ªÔºåÈªëËâ≤ÊòØÊàëÁöÑÂ∑•‰Ωú„ÄÇ‰∏§ËÄÖÈÉΩÊòØÁúüÂÆûÁöÑÊàë„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†ÁöÑÁîüÊ¥ª‰πüÂÉèËäùÂ£´‰∏ÄÊ†∑ÔºåÊüîËΩØËÄåÂØåÊúâÂºπÊÄß„ÄÇ"
        ],
        icon: "üßÄ"
    },
    {
        id: 7,
        name: "IROHA",
        portrait: "assets/portraits/id07.jpg",
        title: "ËñÑÂ∑ßÊ¥æËàûËπàÂÆ§",
        color: "#ff9e6d",
        position: {x: 40, y: 60},
        buildingColor: "#e65100",
        dialogues: [
            "Êù∞Â∞ºÈæü„ÄÅÁå´Âí™„ÄÅÈ¨ºÈ≠Ç...ÈÉΩÊòØÊàëÔºÅÂ∞±ÂÉèËñÑÂ∑ßÔºåÊúâ‰∫∫ÊÅ®Êúâ‰∫∫Áà±„ÄÇ‰ΩÜËàûËπàËÆ©‰∏ÄÂàáÁüõÁõæÂèòÂæóÂíåË∞êÔΩû",
            "ÂæàÂ§ö‰∫∫ÈóÆÊàëÂú®‰∏çÂêå'Â°ë'‰πãÈó¥ÂàáÊç¢‰ºö‰∏ç‰ºöÁ¥Ø...",
            "‰∏ç‰ºöÔºåÂõ†‰∏∫ÊØè‰∏™'Êàë'ÈÉΩÊòØÁúüÂÆûÁöÑ„ÄÇÂ∞±ÂÉèËàûËπàÔºå‰∏çÂêåÈ£éÊ†º‰ΩÜÂêå‰∏ÄË∫´‰Ωì„ÄÇ",
            "ÊèêÊãâÁ±≥ËãèÂíåËàûËπàÊúâ‰ªÄ‰πàÂÖ±ÈÄöÁÇπÔºüÂ±ÇÊ¨°ÊÑüÔºÅ",
            "ÊèêÊãâÁ±≥ËãèÊúâÂíñÂï°„ÄÅÂ•∂ÈÖ™„ÄÅÂèØÂèØ...ËàûËπàÊúâËäÇÂ•è„ÄÅÊÉÖÊÑü„ÄÅÊïÖ‰∫ã„ÄÇÈÉΩÊòØÂ§öÂ±ÇÊ¨°ÁöÑ‰∫´Âèó„ÄÇ",
            "Ëá≥‰∫éÈÇ£‰∏™ËëóÂêçÁöÑÈ≤§È±ºÊâìÊå∫...È¶ñÂÖàË¶ÅÊúâË∑åÂÄíÁöÑÂãáÊ∞îÔºåÁÑ∂ÂêéÁû¨Èó¥ÂèëÂäõÔºÅ",
            "ÁîüÊ¥ª‰πüÊòØËøôÊ†∑Ôºö‰∏çÊÄïÊëîÂÄíÔºåÊâçËÉΩÂçé‰∏ΩËµ∑Ë∫´„ÄÇ",
            "ËñÑÂ∑ßÊ¥æÔºüÊòØÁöÑÔºåÊàëÂùöÊåÅÔºÅÂ∞±ÂÉèÂùöÊåÅÂÅöÂ§öÈù¢ÁöÑËá™Â∑±„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†ÁöÑÁîüÊ¥ª‰πüÂÉèËàûËπà‰∏ÄÊ†∑ÔºåÂÖÖÊª°ËäÇÂ•è‰∏éÂíåË∞ê„ÄÇ"
        ],
        icon: "üíÉ"
    },
    {
        id: 8,
        name: "Âæê‰øäËæâ",
        portrait: "assets/portraits/id08.jpg",
        title: "ÈªëÁôΩÈîÆÊ≤âÊÄùÁîªÂªä",
        color: "#90be6d",
        position: {x: 75, y: 85},
        buildingColor: "#33691e",
        dialogues: [
            "Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑÁüõÁõæÁ©∫Èó¥„ÄÇÈí¢Áê¥ÊòØÁ≤æÁ°ÆÁöÑÔºåÁªòÁîªÊòØËá™Áî±ÁöÑÔºõËçâËéìÊòØÁîúÁöÑÔºåÊ¶¥Ëé≤ÊòØ...‰∏çÂ≠òÂú®ÁöÑ„ÄÇ",
            "ÈÇ£‰∫õ'Â•áÊÄ™ÁÖßÁâá'ÔºåÊàëÊÉ≥ÊçïÊçâÁöÑ‰∏çÊòØÂ•áÊÄ™ÔºåËÄåÊòØÁã¨ÁâπÁöÑËßíÂ∫¶„ÄÇ",
            "Â∞±ÂÉèËçâËéìÔºåÂ§ßÂ§öÊï∞‰∫∫ÁúãÂà∞Á∫¢Ëâ≤ÔºåÊàëÂØªÊâæÈò¥ÂΩ±ÈáåÁöÑÈùíËâ≤„ÄÇ",
            "Èí¢Áê¥ÁöÑ‰∏•Ë∞®Â¶Ç‰ΩïÂΩ±ÂìçÊàëÁöÑËá™Áî±Âàõ‰ΩúÔºüÁ∫™ÂæãÂ∏¶Êù•ÁúüÊ≠£ÁöÑËá™Áî±„ÄÇ",
            "Â∞±ÂÉèËøõÂáªÁöÑÂ∑®‰∫∫ÔºåÊ≤°ÊúâÂüéÂ¢ôÁöÑ‰øùÊä§ÔºåÂ∞±Ê≤°ÊúâÊé¢Á¥¢‰∏ñÁïåÁöÑÂãáÊ∞î„ÄÇ",
            "‰∏ú‰∫¨È¶ôËïâÈù¢ÂåÖÂíåËøõÂáªÁöÑÂ∑®‰∫∫Êúâ‰ªÄ‰πàÂÖ≥ËÅîÔºüÈÉΩÊòØÊ∑∑Âêà‰ΩìÔºÅ",
            "È¶ôËïâÁöÑÁîúÂíåÈù¢ÂåÖÁöÑÂÆûÔºå‰∫∫Á±ªÁöÑËÑÜÂº±ÂíåÂ∑®‰∫∫ÁöÑÂäõÈáè„ÄÇÁüõÁõæ‰∏≠ÁöÑÂíåË∞êÊúÄËø∑‰∫∫„ÄÇ",
            "Èí¢Áê¥„ÄÅÁªòÁîª„ÄÅÊëÑÂΩ±...ÈÉΩÊòØÊàë‰∏é‰∏ñÁïåÂØπËØùÁöÑ‰∏çÂêåËØ≠Ë®Ä„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†‰πüÊâæÂà∞Â±û‰∫éËá™Â∑±ÁöÑË°®ËææÊñπÂºè„ÄÇ"
        ],
        icon: "üé®"
    },
    {
        id: 9,
        name: "ÊûóÊû´Â≠êFUKO",
        portrait: "assets/portraits/id09.jpg",
        title: "Â§öËØ≠Ë®ÄÂπøÊí≠Á´ô",
        color: "#f9c74f",
        position: {x: 50, y: 20},
        buildingColor: "#ff9800",
        dialogues: [
            "ÎßàÏù¥ÌÅ¨ ÌÖåÏä§Ìä∏~ÔºàÈ∫¶ÂÖãÈ£éÊµãËØïÔºâÔºÅTOPIK 6Á∫ß„ÄÅÁªïÂè£‰ª§„ÄÅ‰∏ªÊåÅ„ÄÅKPOP...ÊàëÁöÑ‰∏ñÁïåÁî±Â£∞Èü≥ÊûÑÊàê„ÄÇ",
            "Â≠¶Èü©ËØ≠ÊúÄÈöæÁöÑÊòØ‰ªÄ‰πàÔºüÊï¨ËØ≠Á≥ªÁªüÔºÅ‰ΩÜÂ∞±ÂÉèÁªïÂè£‰ª§ÔºåÁªÉ‰π†Â§ö‰∫ÜÂ∞±È°∫‰∫Ü„ÄÇ",
            "ËØ≠Ë®ÄÊòØÊ°•Ê¢ÅÔºåËøûÊé•‰∏çÂêå‰∏ñÁïåÁöÑÊàë„ÄÇ",
            "Ê®°‰ªø‰∏ªÊåÅ‰∫∫ÂíåÁúüÊ≠£‰∏ªÊåÅÊúâ‰ªÄ‰πà‰∏çÂêåÔºüÊ®°‰ªøÊòØÂ§çÂà∂Ôºå‰∏ªÊåÅÊòØÂàõÈÄ†„ÄÇ",
            "Â∞±ÂÉèÂ¶àÂ¶àÂÅöÁöÑÂ°îÂèØÈ•≠ÔºåÂà´‰∫∫ËÉΩÂÅöÔºå‰ΩÜÂè™ÊúâÂ•πÁöÑÊúâ'ÂÆ∂'ÁöÑÂë≥ÈÅì„ÄÇ",
            "ÊØèÊ¨°ÁªÉ‰π†Âà∞Ê∑±Â§úÔºåÂ¶àÂ¶àÈÉΩ‰ºöÂÅöÂ°îÂèØÈ•≠Á≠âÊàë„ÄÇ",
            "ÈÇ£ÊòØÁñ≤ÊÉ´Êó∂ÊúÄÊ∏©ÊöñÁöÑÂÖÖÁîµÁ´ôÔºå‰πüÊòØÊàëÊÉ≥ÂøµÁöÑÂÆ∂‰π°Âë≥„ÄÇ",
            "Â∏ïÊÅ∞ÁãóÔºüÂÆÉ‰ª£Ë°®Á∫ØÁ≤πÁöÑÂø´‰πêÔºåÂ∞±ÂÉèÊàëÁ´ôÂú®ËàûÂè∞‰∏äÊó∂ÁöÑÂøÉÊÉÖ„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†ÁöÑ‰∏ñÁïå‰πüÂÖÖÊª°ÁæéÂ¶ôÁöÑÂ£∞Èü≥ÂíåÊ∏©ÊöñÁöÑÂõûÂøÜ„ÄÇ"
        ],
        icon: "üé§"
    },
    {
        id: 10,
        name: "ÈáëÊãèÁÇÖNaky",
        portrait: "assets/portraits/id10.jpg",
        title: "MelodyÁßòÂØÜÂü∫Âú∞",
        color: "#f8961e",
        position: {x: 20, y: 45},
        buildingColor: "#e65100",
        dialogues: [
            "ÔºàÂéã‰ΩéÂ£∞Èü≥ÔºâËøôÈáåÊòØÊàëÁöÑÁªùÂØπÈ¢ÜÂüü...ÔºàÁ™ÅÁÑ∂Êä±ÁùÄMelodyÁé©ÂÅ∂ÔºâÂïäÔºÅËøôÂè™ÂàöÂà∞ÔºÅ",
            "Âí≥Âí≥...ÈáçÊñ∞ÂºÄÂßã„ÄÇÊ¨¢ËøéÊù•Âà∞ÊàëÁöÑÁüõÁõæ‰∏ñÁïå„ÄÇ",
            "‰Ωú‰∏∫ËàûËπàÈòüÈïøÔºåÊúÄÈöæÁöÑÊòØÂπ≥Ë°°‰∏•ÂéâÂíåÊ∏©Êüî„ÄÇÂè∞‰∏äË¶ÅÂÆåÁæéÔºåÂè∞‰∏ãË¶ÅÁêÜËß£„ÄÇ",
            "Â∞±ÂÉèMelodyÔºåÂ§ñË°®ÂèØÁà±ÔºåÂÜÖÂøÉÂº∫Â§ß„ÄÇ",
            "‰∏∫‰ªÄ‰πàËøô‰πàÂñúÊ¨¢MelodyÔºüÂÆÉ‰∏ç‰ºöËØ¥ËØùÔºå‰ΩÜÊáÇÂæóÊâÄÊúâÊÉÖÁª™„ÄÇ",
            "ÂΩìÊàë‰ªéÈÖ∑Â∏ÖÁöÑÈòüÈïøÂèòÂõûÊôÆÈÄöÂ•≥Â≠©Êó∂ÔºåÂÆÉÊòØÊàëÊúÄÂ•ΩÁöÑÂê¨‰ºó„ÄÇ",
            "'BIBIÂ¶π'Ëøô‰∏™ÊòµÁß∞ÊòØÁ≤â‰∏ùËµ∑ÁöÑÔºÅÂõ†‰∏∫Âè∞‰∏ä'bibi'ÔºàÂº∫ÂäøÔºâÔºåÂè∞‰∏ã'Â¶πÂ¶π'ÔºàÂèØÁà±Ôºâ„ÄÇ",
            "ÂæàË¥¥ÂàáÔºåÊàëÂÖ®ÁõòÊé•ÂèóÔºÅËøôÂ∞±ÊòØÁúüÂÆûÁöÑÊàë„ÄÇ",
            "ËäíÊûúÔºüÊúÄÁà±ÔºÅÂ∞±ÂÉèÁîüÊ¥ªÔºåÂ§ñË°®ÂùöÁ°¨ÔºåÂÜÖÂú®ÁîúÁæéÂ§öÊ±Å„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†ÁöÑÁîüÊ¥ª‰πüÂÉèMelody‰∏ÄÊ†∑ÔºåÂÖÖÊª°Ê∏©Êüî‰∏éÊÉäÂñú„ÄÇ"
        ],
        icon: "üé≠"
    },
    {
        id: 11,
        name: "ÊùéÁü•Á¶πJiwoo",
        portrait: "assets/portraits/id11.jpg",
        title: "ÂÜ∞Ëå∂Â∞èÁÜäÂâßÈô¢",
        color: "#43aa8b",
        position: {x: 65, y: 65},
        buildingColor: "#00695c",
        dialogues: [
            "ÂæàÂ§ö‰∫∫ËØ¥Êàë'ÈïøÂæóËêåÂç¥Ë¶ÅËÄçÈÖ∑'...‰ΩÜ‰∏∫‰ªÄ‰πàË¶Å‰∫åÈÄâ‰∏ÄÂë¢ÔºüÂ∞±ÂÉèÂÜ∞Ëå∂ÔºåÊó¢Ê∏ÖÈÜíÂèàÁîúÁæé„ÄÇ",
            "È´ò‰∏™Â≠êÂ•≥Áîü‰ºöÈù¢ÂØπ‰ªÄ‰πàÁâπÂà´Âõ∞Êâ∞ÔºüÊÄªË¢´ÊúüÂæÖË¶Å'Âº∫Âäø'Ôºå‰ΩÜÊàëÊÉ≥ËØ¥ÔºöÈ´ò‰∏™Â≠ê‰πüÂèØ‰ª•ËΩØËêåÔºÅ",
            "Â∞±ÂÉèMaruÔºàÊàëÁöÑÂ∞èÁãóÔºâÔºåÂ§ßÂè™‰ΩÜÊ∏©Êüî„ÄÇ",
            "‰∏∫‰ªÄ‰πàËøô‰πà‰æùËµñÂÜ∞Ëå∂ÔºüÂÜ∞Ëå∂ËÆ©Êàë‰øùÊåÅÊ∏ÖÈÜíÁöÑÁîúËúú„ÄÇ",
            "ÁÉòÁÑôÊó∂ÊèêÁ•ûÔºåÁúãÈü≥‰πêÂâßÊó∂‰∏çÊâìÁûåÁù°ÔºåÊâìÊ∏∏ÊàèÊó∂‰øùÊåÅ‰∏ìÊ≥®...ÂÆÉÊòØÊàëÁöÑÂ§öÂäüËÉΩÁáÉÊñô„ÄÇ",
            "ÁÉòÁÑôÂíåÊâìÂÜ∞ÁêÉÔºå‰∏ÄÊüî‰∏ÄÂàöÔºå‰Ω†ÊÄé‰πàÂπ≥Ë°°ÔºüÁÉòÁÑôÊòØÂàõÈÄ†ÔºåÂÜ∞ÁêÉÊòØÈáäÊîæ„ÄÇ",
            "‰∏Ä‰∏™Ê∏©ÊöñÂé®ÊàøÔºå‰∏Ä‰∏™ÂÜ∞ÂÜ∑ËµõÂú∫„ÄÇ‰∏§ËÄÖÈÉΩÊòØÊàë‰∏é‰∏ñÁïåÂØπËØùÁöÑÊñπÂºè„ÄÇ",
            "ÁôΩËâ≤ÊòØÊàëÊúÄÂñúÊ¨¢ÁöÑÈ¢úËâ≤ÔºåÁ∫ØÂáÄÂ¶ÇÈõ™ÔºåÂåÖÂÆπ‰∏ÄÂàá„ÄÇ",
            "Âú£ËØûÂø´‰πêÔºÅÊÑø‰Ω†‰πüËÉΩÂÉèÂÜ∞Ëå∂‰∏ÄÊ†∑ÔºåÊâæÂà∞ÁîüÊ¥ª‰∏≠ÁöÑÊ∏ÖÈÜí‰∏éÁîúËúú„ÄÇ"
        ],
        icon: "‚òï"
    },
    {
        id: 12,
        name: "Â¥îÂøóÂÆá",
        portrait: "assets/portraits/id12.jpg",
        title: "ÁôΩÈº¨Áü≥Â§¥ÁñóÊÑàÈ¶Ü",
        color: "#a78bfa",
        position: {x: 45, y: 85},
        buildingColor: "#7c3aed",
        dialogues: [
            "Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑÁñóÊÑàÁ©∫Èó¥ÔΩûÊØîËµ∑Êàê‰∏∫Âä®Áâ©ÔºåÊàëÊõ¥ÊÉ≥Êàê‰∏∫‰∏ÄÂùóÂÆâÈùôÁöÑÁü≥Â§¥„ÄÇ‰Ω†Áü•ÈÅìÁôΩÈº¨Â°ëÂêóÔºü",
            "ÊàëÁöÑÊó•Â∏∏ÂæàÁÆÄÂçïÔºöÂçäË∫´Êµ¥„ÄÅËçâËéìÊ°ÉÂ≠ê„ÄÅÁ¢≥ÈÖ∏È•ÆÊñôÔºåËøòÊúâ„ÄäÊú∫Êô∫ÁöÑÂåªÁîüÁîüÊ¥ª„Äã„ÄÇ",
            "ÁªøËå∂ËçâËéìÈ¶ôËçâÂ∑ßÂÖãÂäõÂÜ∞Ê∑áÊ∑ãÊòØÊàëÁöÑÊúÄÁà±ÔºåÈÖ∏Â•∂ÂÜ∞Ê∑áÊ∑ãË¶ÅÂä†ËçâËéì+Ê†ºÂÖ∞ËØ∫ÊãâÈ∫¶Áâá+Â•∂ÈÖ™Âùó+LotusÈ•ºÂπ≤Á¢éÔºÅ",
            "ËÆ®ÂéåËô´Â≠êÔºåÂñúÊ¨¢Ëä±È¶ôÁöÇÈ¶ôÁöÑÈ¶ôÊ∞¥„ÄÇÁßÅÊúçÈáåÈªëËâ≤ÊúÄÂ§öÔºåÂõ†‰∏∫ÂÉèÁü≥Â§¥ÁöÑÊ≤âÁ®≥„ÄÇ",
            "‰Ω†Áü•ÈÅì520ÊòØÊàëÁà±‰Ω†ÁöÑÊÑèÊÄùÂêóÔºüÂ∞±ÂÉè„ÄäÊàëÁöÑÊòéÂ§©Ôºå‰Ω†ÁöÑÊò®Â§©„ÄãÈáåÈÇ£ÁßçË∑®Ë∂äÊó∂Èó¥ÁöÑÊÑüÊÉÖ„ÄÇ",
            "Áî®ChatGPTÊµãÂâç‰∏ñÔºåËØ¥Êàë‰∏äËæàÂ≠êÊòØÊääÁîüÂëΩÂØÑÊâòÂú®Á∫™ÂæãÂíå‰ø°Âøµ‰∏äÁöÑ‰∫∫‚Äî‚ÄîÊïôÂ∏àÊàñÁ•ûËÅå‰∫∫Âëò„ÄÇ",
            "ËøëËßÜ‰ΩÜ‰∏çÊà¥ÁúºÈïúÔºåÂ∑¶ÁúºËßÜÂäõÊõ¥‰ΩéÔºåÂ∑¶Áúº‰πüÊõ¥Â∞è„ÄÇËÑÜÊ°ÉÊ∞¥ËúúÊ°ÉÈáåÊõ¥ÂñúÊ¨¢Ê∞¥ËúúÊ°ÉÁöÑÊüîËΩØ„ÄÇ",
            "Âê¨Ê≠å‰ºö‰∏ÄÁõ¥Âê¨Âà∞ËÖªÔºåUtadaÁöÑÊ≠åÂíåÂéüÂë≥PockyÊòØÊàëÁöÑcomfort zone„ÄÇ",
            "Âú£ËØûÂø´‰πêÔΩûÊÑø‰Ω†ËÉΩÊâæÂà∞ÂÉèÁü≥Â§¥‰∏ÄÊ†∑ÂÆâÁ®≥ÔºåÂèàÂÉèÁôΩÈº¨‰∏ÄÊ†∑ÁÅµÂä®ÁöÑÂπ≥Ë°°„ÄÇ"
        ],
        icon: "ü™®"
    }
];

function renderGirls() {
    const map = document.getElementById('city-map'); // ÂÅáËÆæ‰Ω†ÁöÑÂÆπÂô®IDÊòØËøô‰∏™
    
    girls.forEach(girl => {
        const node = document.createElement('div');
        node.className = 'girl-node';
        node.style.left = `${girl.position.x}%`;
        node.style.top = `${girl.position.y}%`;

        node.innerHTML = `
            <div class="avatar-container" style="border: 3px solid ${girl.color}">
                < img src="${girl.portrait}" alt="${girl.name}" style="width:100%; height:100%; object-fit:cover; border-radius:50%;">
                <span class="icon-tag">${girl.icon}</span>
            </div>
            <div class="label-tag">${girl.name}</div>
        `;
        
        map.appendChild(node);
    });
}
        function renderGirls() {
    const map = document.getElementById('city-map');
    
    girls.forEach(girl => {
        const node = document.createElement('div');
        node.className = 'girl-node';
        node.style.left = `${girl.position.x}%`;
        node.style.top = `${girl.position.y}%`;

        node.innerHTML = `
            <div class="avatar-container" style="border: 3px solid ${girl.color}; position: relative; width: 80px; height: 80px;">
                <img src="${girl.portrait}" alt="${girl.name}" style="width:100%; height:100%; object-fit:cover; border-radius:50%; display: block;">
                
                <span class="icon-tag" style="
                    position: absolute; 
                    bottom: -5px; 
                    right: -5px; 
                    background: white; 
                    border-radius: 50%; 
                    width: 25px; 
                    height: 25px; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                    font-size: 14px;
                ">
                    ${girl.icon}
                </span>
            </div>
            <div class="label-tag" style="text-align: center; margin-top: 8px; font-weight: bold; color: ${girl.color};">
                ${girl.name}
            </div>
        `;
        
        map.appendChild(node);
    });
}

        // Ê∏∏ÊàèÁä∂ÊÄÅ
        const gameState = {
            currentScreen: 'loading',
            completedGirls: [],
            progress: 0,
            currentGirlIndex: 0,
            dialogueStep: 0,
            wishColor: '#ff6b6b',
            // Â≠òÂÇ®ÊØè‰∏™Â•≥Â≠©ÁöÑÁ´ãÁªòÊï∞ÊçÆÔºàbase64Ê†ºÂºèÔºâ
            girlPortraits: {}
        };

        // DOMÂÖÉÁ¥†
        const screens = {
            loading: document.getElementById('loading-screen'),
            map: document.getElementById('map-screen'),
            dialogue: document.getElementById('dialogue-screen'),
            tree: document.getElementById('tree-screen')
        };

        // Èü≥È¢ëÂÖÉÁ¥†
        const bgMusic = document.getElementById('bg-music');
        const doorSound = document.getElementById('door-sound');
        const bellSound = document.getElementById('bell-sound');

        // Êä†ÂÉèÁîªÂ∏ÉÁõ∏ÂÖ≥
        const portraitCanvas = document.getElementById('portrait-canvas');
        const portraitCtx = portraitCanvas.getContext('2d');
        const fileInput = document.getElementById('file-input');

        // ÂàùÂßãÂåñ
        function init() {
            createSnowfall();
            setupEventListeners();
            simulateLoading();
        }

        // ÂàõÂª∫Èõ™Ëä±ÊïàÊûú
        function createSnowfall() {
            const snowContainer = document.getElementById('snowfall');
            const mapSnowContainer = document.getElementById('map-snow');
            
            for(let i = 0; i < 100; i++) {
                createSnowflake(snowContainer);
            }
            
            for(let i = 0; i < 50; i++) {
                createSnowflake(mapSnowContainer);
            }
        }

        function createSnowflake(container) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            
            const size = Math.random() * 5 + 2;
            const startX = Math.random() * 100;
            const duration = Math.random() * 10 + 10;
            const delay = Math.random() * 10;
            
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.left = `${startX}vw`;
            snowflake.style.opacity = Math.random() * 0.5 + 0.3;
            snowflake.style.animationDuration = `${duration}s`;
            snowflake.style.animationDelay = `${delay}s`;
            
            container.appendChild(snowflake);
        }

        // Ê®°ÊãüÂä†ËΩΩËøáÁ®ã
        function simulateLoading() {
            const loadingBar = document.getElementById('loading-bar');
            let progress = 0;
            
            const interval = setInterval(() => {
                progress += Math.random() * 10 + 5;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    loadingBar.style.width = '100%';
                    setTimeout(() => {
                        playWelcomeAudio();
                    }, 500);
                } else {
                    loadingBar.style.width = `${progress}%`;
                }
            }, 200);
        }

        // Êí≠ÊîæÊ¨¢ËøéÈü≥È¢ë
        function playWelcomeAudio() {
            bellSound.play();
            
            // ÊòæÁ§∫ÁÇπÂáªÊèêÁ§∫
            const gateText = document.querySelector('.gate-text');
            gateText.textContent = "ÁÇπÂáªÈó®ÁéØËøõÂÖ•Ê∏∏Âõ≠‰ºö";
            gateText.style.animation = "textGlow 1.5s infinite";
        }

        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupEventListeners() {
            // Èó®ÁéØÁÇπÂáª
            document.getElementById('door-knocker').addEventListener('click', openGate);
            
            // Âú∞ÂõæÊéßÂà∂
            document.getElementById('zoom-in').addEventListener('click', () => zoomMap(1.2));
            document.getElementById('zoom-out').addEventListener('click', () => zoomMap(0.8));
            document.getElementById('reset-view').addEventListener('click', resetMapView);
            
            // ÂØπËØùÊéßÂà∂
            document.getElementById('close-dialogue').addEventListener('click', closeDialogue);
            document.getElementById('prev-dialogue').addEventListener('click', prevDialogue);
            document.getElementById('next-dialogue').addEventListener('click', nextDialogue);
            
            // ÂØπËØùÊñáÊú¨ÁÇπÂáª
            document.getElementById('dialogue-text').addEventListener('click', nextDialogue);
            
            // Êñá‰ª∂‰∏ä‰º†
            fileInput.addEventListener('change', handleImageUpload);
            
            // ÂøÉÊÑøÊéßÂà∂
            document.getElementById('hang-wish').addEventListener('click', hangWish);
            document.getElementById('return-to-map').addEventListener('click', returnToMap);
            
            // È¢úËâ≤ÈÄâÊã©
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    gameState.wishColor = this.getAttribute('data-color');
                });
            });
            
            // Âú£ËØûÊ†ëÁÇπÂáª
            document.getElementById('final-tree').addEventListener('click', () => {
                if (gameState.completedGirls.length === girls.length) {
                    switchScreen('tree');
                }
            });
        }

        // ÊâìÂºÄÂ§ßÈó®
        function openGate() {
            const leftDoor = document.querySelector('.left-door');
            const rightDoor = document.querySelector('.right-door');
            const gate = document.getElementById('gate');
            
            // Êí≠ÊîæÈü≥Êïà
            doorSound.play();
            bgMusic.volume = 0.3;
            bgMusic.play();
            
            // Âä®ÁîªÊïàÊûú
            leftDoor.style.transform = 'perspective(1000px) rotateY(-100deg)';
            rightDoor.style.transform = 'perspective(1000px) rotateY(100deg)';
            gate.style.cursor = 'default';
            
            // ËøáÊ∏°Âà∞Âú∞ÂõæÁïåÈù¢
            setTimeout(() => {
                switchScreen('map');
                createShops();
            }, 1500);
        }

        // ÂàáÊç¢Â±èÂπï
        function switchScreen(screenName) {
            // ÈöêËóèÊâÄÊúâÂ±èÂπï
            Object.values(screens).forEach(screen => {
                screen.style.opacity = '0';
                screen.style.pointerEvents = 'none';
            });
            
            // ÊòæÁ§∫ÁõÆÊ†áÂ±èÂπï
            screens[screenName].style.opacity = '1';
            screens[screenName].style.pointerEvents = 'auto';
            gameState.currentScreen = screenName;
            
            // ÁâπÊÆäÂ§ÑÁêÜ
            if (screenName === 'map') {
                updateProgress();
            } else if (screenName === 'tree') {
                createOrnaments();
            }
        }

        // ÂàõÂª∫Â∫óÈì∫
        function createShops() {
            const mapContent = document.getElementById('map-content');
            
            // Ê∏ÖÁ©∫Áé∞ÊúâÂ∫óÈì∫
            const existingShops = document.querySelectorAll('.shop');
            existingShops.forEach(shop => shop.remove());
            
            // ÂàõÂª∫Êñ∞Â∫óÈì∫
            girls.forEach(girl => {
                const shop = document.createElement('div');
                shop.className = `shop ${gameState.completedGirls.includes(girl.id) ? 'completed' : 'active'}`;
                shop.id = `shop-${girl.id}`;
                shop.style.left = `${girl.position.x}%`;
                shop.style.top = `${girl.position.y}%`;
                shop.style.backgroundColor = girl.buildingColor;
                
                shop.innerHTML = `
                    <div class="shop-building">
                        <div class="shop-roof"></div>
                        <div class="shop-girl" style="background-color: ${girl.color}; border-radius: 50% 50% 0 0;"></div>
                    </div>
                    <div class="shop-name">${girl.name}</div>
                `;
                
                // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
                shop.addEventListener('click', () => openDialogue(girl));
                
                // Ê∑ªÂä†ÊÇ¨ÂÅú‰∫ã‰ª∂
                shop.addEventListener('mouseenter', () => {
                    if (!gameState.completedGirls.includes(girl.id)) {
                        shop.style.boxShadow = `0 0 20px ${girl.color}`;
                    }
                });
                
                shop.addEventListener('mouseleave', () => {
                    if (!gameState.completedGirls.includes(girl.id)) {
                        shop.style.boxShadow = 'none';
                    }
                });
                
                mapContent.appendChild(shop);
            });
        }

        // ÊâìÂºÄÂØπËØù
        function openDialogue(girl) {
            gameState.currentGirlIndex = girl.id - 1;
            gameState.dialogueStep = 0;
            
            // Êõ¥Êñ∞UI
            document.getElementById('girl-name').textContent = girl.name;
            document.getElementById('girl-title').textContent = girl.title;
            document.getElementById('dialogue-bg').style.backgroundColor = girl.color;
            document.getElementById('dialogue-text').textContent = girl.dialogues[0];
            
            // Âä†ËΩΩÊàñÁªòÂà∂Á´ãÁªò
            loadGirlPortrait(girl);
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            updateDialogueButtons();
            
            // ÂàáÊç¢Â±èÂπï
            switchScreen('dialogue');
        }

       // ‰ºòÂåñÔºöÂä†ËΩΩÂ•≥Â≠©Á´ãÁªòÔºà‰øÆÂ§çÊ∏≤ÊüìÂºÇÂ∏∏Ôºâ
function loadGirlPortrait(girl) {
    const girlId = girl.id;
    const canvas = document.getElementById('portrait-canvas');
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ‰ºòÂÖàÁî®‰∏ä‰º†ÁöÑÁ´ãÁªò
    if (gameState.girlPortraits[girlId]) {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => {
            // ‰øÆÂ§çÔºöÂº∫Âà∂Ê∏ÖÁ©∫ÁîªÂ∏É+ÈáçÊñ∞ÁªòÂà∂
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Á≠âÊØîÁº©Êîæ+Â±Ö‰∏≠ÔºåÈÅøÂÖçË∂ÖÂá∫ÁîªÂ∏É
            const scale = Math.min(
                canvas.width / img.width,
                canvas.height / img.height
            );
            const dw = img.width * scale;
            const dh = img.height * scale;
            const dx = (canvas.width - dw) / 2;
            const dy = (canvas.height - dh) / 2;
            ctx.drawImage(img, dx, dy, dw, dh);
        };
        img.onerror = () => {
            drawPlaceholderPortrait(girl);
        };
        img.src = gameState.girlPortraits[girlId];
    } else {
        // Âä†ËΩΩÈªòËÆ§Á´ãÁªò
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const scale = Math.min(
                canvas.width / img.width,
                canvas.height / img.height
            );
            const dw = img.width * scale;
            const dh = img.height * scale;
            const dx = (canvas.width - dw) / 2;
            const dy = (canvas.height - dh) / 2;
            ctx.drawImage(img, dx, dy, dw, dh);
        };
        img.onerror = () => {
            drawPlaceholderPortrait(girl);
        };
        img.src = girl.portrait;
    }
}

        // ÁªòÂà∂ÈªòËÆ§Âç†‰ΩçÁ¨¶Á´ãÁªò
        function drawPlaceholderPortrait(girl) {
            // ÂàõÂª∫Ê∏êÂèòËÉåÊôØ
            const gradient = portraitCtx.createLinearGradient(0, 0, portraitCanvas.width, portraitCanvas.height);
            gradient.addColorStop(0, girl.color + "40"); // 40 = 25%ÈÄèÊòéÂ∫¶
            gradient.addColorStop(1, girl.color + "80"); // 80 = 50%ÈÄèÊòéÂ∫¶
            
            portraitCtx.fillStyle = gradient;
            portraitCtx.fillRect(0, 0, portraitCanvas.width, portraitCanvas.height);
            
            // ÁªòÂà∂ÂõæÊ†á
            portraitCtx.fillStyle = "#fff";
            portraitCtx.font = 'bold 80px sans-serif';
            portraitCtx.textAlign = 'center';
            portraitCtx.textBaseline = 'middle';
            portraitCtx.fillText(girl.icon, portraitCanvas.width / 2, portraitCanvas.height / 2);
            
            // Ê∑ªÂä†ÊèêÁ§∫ÊñáÂ≠ó
            portraitCtx.font = '16px Inter, sans-serif';
            portraitCtx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            portraitCtx.fillText('ÁÇπÂáª"‰∏ä‰º†Á´ãÁªò"ÊõøÊç¢', portraitCanvas.width / 2, portraitCanvas.height - 40);
        }

 // ‰ºòÂåñÔºöÂ§ÑÁêÜÂõæÁâá‰∏ä‰º†Ôºà‰øÆÂ§çÊ∏≤Êüì+ÈÅøÂÖç‰ª£Á†Å‰π±ÊòæÔºâ
function handleImageUpload(e) {
    const file = e.target.files[0];
    if (!file || !file.type.startsWith('image/')) {
        alert("ËØ∑‰∏ä‰º†ÊúâÊïàÁöÑÂõæÁâáÊñá‰ª∂ÔºÅ");
        return;
    }

    const reader = new FileReader();
    reader.onload = function(event) {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => {
            try {
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = portraitCanvas.width;
                tempCanvas.height = portraitCanvas.height;
                tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);

                // Á≠âÊØîÁº©Êîæ+Â±Ö‰∏≠ÁªòÂà∂
                const scale = Math.min(
                    tempCanvas.width / img.width,
                    tempCanvas.height / img.height
                );
                const dw = img.width * scale;
                const dh = img.height * scale;
                const dx = (tempCanvas.width - dw) / 2;
                const dy = (tempCanvas.height - dh) / 2;
                tempCtx.drawImage(img, dx, dy, dw, dh);

                // ‰ºòÂåñÊä†ÂÉèÔºàÂ¢ûÂä†ËæπÁºòÊ®°Á≥äÔºåÈÅøÂÖçÈîØÈΩøÔºâ
                const imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
                const data = imageData.data;
                const corners = [[0,0], [tempCanvas.width-1,0], [0,tempCanvas.height-1], [tempCanvas.width-1,tempCanvas.height-1]];
                
                let bgR = 0, bgG = 0, bgB = 0;
                corners.forEach(([x,y]) => {
                    const idx = (y * tempCanvas.width + x) * 4;
                    bgR += data[idx];
                    bgG += data[idx+1];
                    bgB += data[idx+2];
                });
                bgR = Math.round(bgR / 4);
                bgG = Math.round(bgG / 4);
                bgB = Math.round(bgB / 4);
                const tolerance = 60;

                for(let i = 0; i < data.length; i += 4) {
                    const r = data[i], g = data[i+1], b = data[i+2];
                    const diff = Math.abs(r-bgR) + Math.abs(g-bgG) + Math.abs(b-bgB);
                    if(diff < tolerance) {
                        data[i+3] = 0; // ÈÄèÊòé
                    } else {
                        // Â¢ûÂä†ËæπÁºòÊüîÂíåÂ∫¶
                        data[i+3] = 255;
                    }
                }

                tempCtx.putImageData(imageData, 0, 0);
                const processedData = tempCanvas.toDataURL('image/png');
                
                // ÂÖ≥ËÅîÂΩìÂâçÂ•≥Â≠©IDÔºà‰øÆÂ§çÊ†∏ÂøÉÈóÆÈ¢òÔºâ
                const currentGirl = girls[gameState.currentGirlIndex];
                gameState.girlPortraits[currentGirl.id] = processedData;

                // Á´ãÂç≥Ê∏≤ÊüìÂà∞ÁîªÂ∏É
                const ctx = portraitCanvas.getContext('2d');
                ctx.clearRect(0, 0, portraitCanvas.width, portraitCanvas.height);
                ctx.drawImage(tempCanvas, 0, 0);
                showUploadSuccess();
            } catch (err) {
                alert("Á´ãÁªòÂ§ÑÁêÜÂ§±Ë¥•ÔºåËØ∑Êç¢‰∏ÄÂº†ÂõæÁâáËØïËØïÔºÅ");
                console.error(err);
            }
        };
        img.onerror = () => {
            alert("ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÂõæÁâáÊ†ºÂºèÔºÅ");
        };
        img.src = event.target.result;
    };
    reader.readAsDataURL(file);
    e.target.value = '';
}

        // Êõ¥Êñ∞ÂØπËØùÊåâÈíÆÁä∂ÊÄÅ
        function updateDialogueButtons() {
            const girl = girls[gameState.currentGirlIndex];
            const prevBtn = document.getElementById('prev-dialogue');
            const nextBtn = document.getElementById('next-dialogue');
            
            // ‰∏ä‰∏ÄÂè•ÊåâÈíÆ
            if (gameState.dialogueStep === 0) {
                prevBtn.style.opacity = '0.5';
                prevBtn.style.pointerEvents = 'none';
            } else {
                prevBtn.style.opacity = '1';
                prevBtn.style.pointerEvents = 'auto';
            }
            
            // ‰∏ã‰∏ÄÂè•ÊåâÈíÆ
            if (gameState.dialogueStep === girl.dialogues.length - 1) {
                nextBtn.textContent = 'ÂÆåÊàêÂØπËØù';
            } else {
                nextBtn.textContent = '‰∏ã‰∏ÄÂè•';
            }
        }

        // ÂÖ≥Èó≠ÂØπËØù
        function closeDialogue() {
            switchScreen('map');
        }

        // ‰∏ä‰∏Ä‰∏™ÂØπËØù
        function prevDialogue() {
            if (gameState.dialogueStep > 0) {
                gameState.dialogueStep--;
                const girl = girls[gameState.currentGirlIndex];
                document.getElementById('dialogue-text').textContent = girl.dialogues[gameState.dialogueStep];
                updateDialogueButtons();
            }
        }

        // ‰∏ã‰∏Ä‰∏™ÂØπËØù
        function nextDialogue() {
            const girl = girls[gameState.currentGirlIndex];
            
            if (gameState.dialogueStep < girl.dialogues.length - 1) {
                // ËøòÊúâÊõ¥Â§öÂØπËØù
                gameState.dialogueStep++;
                document.getElementById('dialogue-text').textContent = girl.dialogues[gameState.dialogueStep];
                updateDialogueButtons();
            } else {
                // ÂØπËØùÁªìÊùü
                completeDialogue();
            }
        }

        // ÂÆåÊàêÂØπËØù
        function completeDialogue() {
            const girlId = gameState.currentGirlIndex + 1;
            
            if (!gameState.completedGirls.includes(girlId)) {
                gameState.completedGirls.push(girlId);
                gameState.progress = Math.round((gameState.completedGirls.length / girls.length) * 100);
                
                // Êõ¥Êñ∞ËøõÂ∫¶
                updateProgress();
                
                // ÊòæÁ§∫ÂÆåÊàêÊèêÁ§∫
                setTimeout(() => {
                    alert(`‚úì Â∑≤ÂÆåÊàê‰∏é${girls[gameState.currentGirlIndex].name}ÁöÑÂØπËØùÔºÅ\nÂ∑≤Êî∂ÈõÜ ${gameState.completedGirls.length}/12 ‰∏™ÂøÉÁÅµÁ¢éÁâá`);
                }, 300);
            }
            
            // ËøîÂõûÂú∞Âõæ
            switchScreen('map');
        }

        // Êõ¥Êñ∞ËøõÂ∫¶
        function updateProgress() {
            const progress = gameState.completedGirls.length;
            const progressText = document.getElementById('progress-text');
            const progressCircle = document.getElementById('progress-circle');
            
            progressText.textContent = progress;
            
            // ËÆ°ÁÆóËøõÂ∫¶ÂúÜÁéØ
            const circumference = 2 * Math.PI * 36;
            const offset = circumference - (progress / girls.length) * circumference;
            progressCircle.style.strokeDashoffset = offset;
            
            // Êõ¥Êñ∞Â∫óÈì∫Áä∂ÊÄÅ
            girls.forEach(girl => {
                const shop = document.getElementById(`shop-${girl.id}`);
                if (shop) {
                    if (gameState.completedGirls.includes(girl.id)) {
                        shop.classList.remove('active');
                        shop.classList.add('completed');
                        shop.style.boxShadow = `0 0 15px ${girl.color}`;
                    } else {
                        shop.classList.add('active');
                        shop.classList.remove('completed');
                    }
                }
            });
            
            // Êõ¥Êñ∞Âú£ËØûÊ†ëÁä∂ÊÄÅ
            const finalTree = document.getElementById('final-tree');
            if (gameState.completedGirls.length === girls.length) {
                finalTree.style.cursor = 'pointer';
                finalTree.style.animation = 'pulse-glow 2s infinite';
            }
        }

        // ÂàõÂª∫Ë£ÖÈ•∞ÂìÅ
        function createOrnaments() {
            const tree = document.getElementById('big-tree');
            
            // Ê∏ÖÁ©∫Áé∞ÊúâË£ÖÈ•∞ÂìÅ
            const existingOrnaments = document.querySelectorAll('.ornament');
            existingOrnaments.forEach(ornament => ornament.remove());
            
            // Ê∑ªÂä†Ë£ÖÈ•∞ÂìÅ
            girls.forEach(girl => {
                if (gameState.completedGirls.includes(girl.id)) {
                    const angle = Math.random() * 2 * Math.PI;
                    const distance = Math.random() * 180 + 100;
                    
                    const x = 250 + Math.cos(angle) * distance;
                    const y = 400 - Math.sin(angle) * distance;
                    
                    const ornament = document.createElement('div');
                    ornament.className = 'ornament';
                    ornament.style.left = `${x}px`;
                    ornament.style.top = `${y}px`;
                    ornament.style.backgroundColor = girl.color;
                    ornament.title = girl.name;
                    
                    // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÊòæÁ§∫‰ø°ÊÅØ
                    ornament.addEventListener('click', () => {
                        alert(`${girl.name}ÁöÑÁ•ùÁ¶èÔºö\n${girl.dialogues[girl.dialogues.length - 1]}`);
                    });
                    
                    tree.appendChild(ornament);
                }
            });
        }

        // ÊåÇ‰∏äÂøÉÊÑø
        function hangWish() {
            const wishText = document.getElementById('wish-textarea').value.trim();
            
            if (!wishText) {
                alert('ËØ∑ÂÜô‰∏ã‰Ω†ÁöÑÂú£ËØûÂøÉÊÑøÔºÅ');
                return;
            }
            
            if (wishText.length > 140) {
                alert('ÂøÉÊÑø‰∏çËÉΩË∂ÖËøá140Â≠óÔºÅ');
                return;
            }
            
            // ÂàõÂª∫ÂøÉÊÑøË£ÖÈ•∞ÂìÅ
            const tree = document.getElementById('big-tree');
            const x = 250 + (Math.random() - 0.5) * 100;
            const y = 200 + Math.random() * 200;
            
            const wishOrnament = document.createElement('div');
            wishOrnament.className = 'ornament';
            wishOrnament.style.left = `${x}px`;
            wishOrnament.style.top = `${y}px`;
            wishOrnament.style.backgroundColor = gameState.wishColor;
            wishOrnament.style.width = '40px';
            wishOrnament.style.height = '40px';
            wishOrnament.style.borderRadius = '5px';
            wishOrnament.style.display = 'flex';
            wishOrnament.style.justifyContent = 'center';
            wishOrnament.style.alignItems = 'center';
            wishOrnament.innerHTML = '<i class="fas fa-star" style="color: white; font-size: 16px;"></i>';
            wishOrnament.title = wishText.length > 30 ? wishText.substring(0, 30) + '...' : wishText;
            
            // Ê∑ªÂä†Âà∞Ê†ë‰∏ä
            tree.appendChild(wishOrnament);
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            alert('‚ú® ÂøÉÊÑøÂ∑≤ÊåÇ‰∏äÂú£ËØûÊ†ëÔºÅ\nÊÑø‰Ω†ÁöÑÊÑøÊúõÊàêÁúüÔºÅüéÑ');
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            document.getElementById('wish-textarea').value = '';
        }

        // ËøîÂõûÂú∞Âõæ
        function returnToMap() {
            switchScreen('map');
        }

        // Âú∞ÂõæÁº©Êîæ
        function zoomMap(factor) {
            const mapContent = document.getElementById('map-content');
            const currentScale = parseFloat(getComputedStyle(mapContent).transform.split(',')[3]) || 1;
            const newScale = Math.max(0.5, Math.min(2, currentScale * factor));
            
            mapContent.style.transform = `scale(${newScale})`;
        }

        // ÈáçÁΩÆÂú∞ÂõæËßÜÂõæ
        function resetMapView() {
            const mapContent = document.getElementById('map-content');
            mapContent.style.transform = 'scale(1)';
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
